name: Continuous Deployment

on:
  push:
    branches: [ main ]
    paths-ignore:
      - '**.md'
      - '.gitignore'
      - 'README.md'

jobs:
  deploy:
    name: Deploy to Railway
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Deploy to Railway (Backend)
      uses: bervProject/railway-deploy@v0.2.3
      with:
        railway_token: ${{ secrets.RAILWAY_TOKEN }}
        service: backend
        # Railway will auto-deploy from GitHub, so this is optional
        # But we can add it for explicit control
    
    - name: Deploy to Railway (Frontend)
      uses: bervProject/railway-deploy@v0.2.3
      with:
        railway_token: ${{ secrets.RAILWAY_TOKEN }}
        service: frontend
      continue-on-error: true

